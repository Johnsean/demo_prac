<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/loading.css">
    <script src="//at.alicdn.com/t/font_1194047_zdnh8mek81.js"></script>
    <title>Resume</title>

    <style type="text/css">
        .icon {
            width: 1em;
            height: 1em;
            vertical-align: -0.15em;
            fill: currentColor;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <!-- 载入loading -->
    <!-- <div id="siteWelcome" class="site-welcome active">
        <div class="loadingW"></div>
    </div> -->
    <!-- 顶部导航条 -->
    <div id="topNavBar" class="topNavBar">
        <div class="inner clearfix">
            <!-- logo -->
            <a class="logo" href="#" alt="logo" style="float: left;"><span class="rs">RS</span> <span
                    class="card">card</span></a>
            <!-- nav -->
            <nav class="menu" style="float:right">
                <ul class="clearfix">
                    <li><a href="#card">关于</a></li>
                    <li><a href="#skills"> 技能</a></li>
                    <li><a href="#works">作品</a></li>
                    <li class="menuTigger"><a href="javascript:;">经验</a>
                        <ul class="submenu">
                            <li><a href="javascript:;">经验1</a></li>
                            <li><a href="javascript:;">经验2</a></li>
                            <li><a href="javascript:;">经验3</a></li>
                        </ul>
                    </li>
                    <li><a href="javascript:;">PRICING</a></li>
                    <li class="menuTigger"><a href="#bolg">博客</a>
                        <ul class="submenu">
                            <li><a href="javascript:;">bolg经验经验</a></li>
                            <li><a href="javascript:;">bolg2</a></li>
                            <li><a href="javascript:;">bolg3</a></li>
                        </ul>
                    </li>
                    <li><a href="javascript:;">CALENDAR</a></li>
                    <li><a href="javascript:;">CONTACT</a> </li>
                    <li><a href="javascript:;"> OTHER</a></li>
                </ul>
            </nav>
        </div>
    </div>

    <!-- 背景图 -->
    <div class="banner">
        <div class="mask"></div>
    </div>

    <!-- 个人信息 -->
    <main id="card" data-ele>
        <div class="card clearfix">
            <div class="picture">
                <img src="images/avatar.jpg" style="width:296px;height:343px" alt="头像">
            </div>
            <div class="intro">
                <div class="profile">
                    <span class="welcome">hello<div class="triangle"></div></span>
                    <h1>刘广</h1>
                    <p>前端攻城狮</p>
                    <hr>
                    <dl>
                        <dt>age</dt>
                        <dd>25</dd>
                        <dt>addr</dt>
                        <dd>ChengDu</dd>
                        <dt>E-mail</dt>
                        <dd>956407921@qq.com</dd>
                        <dt>Phone</dt>
                        <dd>133xxxxxxx</dd>
                    </dl>
                </div>
            </div>
        </div>
        <footer id="bolg" class="media">
            <a href="#"><svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-CSDN"></use>
                </svg></a>
            <a href="#"><svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-git"></use>
                </svg></a>
            <a href="#"><svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-google"></use>
                </svg></a>
            <a href="#"><svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-tian7_facebook"></use>
                </svg></a>
        </footer>

    </main>
    <section style="text-align: center">
        <a class="button" href="./resume.txt" target="_blank" download="">Download Resume</a>
        <p style="font-size: 18px;font-family: kai">爱好钓鱼，摸鱼，沉鱼。开天一壶酒。提剑下山去 </p>
    </section>

    <section id="skills" data-ele class="skills">
        <h2>专业技能</h2>
        <div class="photo">
            <span>html
                <div class="progress">
                    <div class="pros"></div>
                </div>
            </span>
            <span>css
                <div class="progress">
                    <div class="pros"></div>
                </div>
            </span>
            <span>js
                <div class="progress">
                    <div class="pros"></div>
                </div>
            </span>
            <span>ajax
                <div class="progress">
                    <div class="pros"></div>
                </div>
            </span>
            <span>vue
                <div class="progress">
                    <div class="pros"></div>
                </div>
            </span>
            <span>react
                <div class="progress">
                    <div class="pros"></div>
                </div>
            </span>
        </div>
    </section>
    <section id="works" data-ele class="works">
        <h2>作品</h2>
        <nav>
            <div class="jobs">
                <button class="jobs1" id="jobs1">所有</button>
                <button class="jobs2" id="jobs2">框架</button>
                <button class="jobs3" id="jobs3">原生js</button>
            </div>
            <div class="progress">
                <div class="pros" id="bar"></div>
            </div>
        </nav>
        <script>
            jobs1.onclick = function () {
                bar.className = 'pros'
            }
            jobs2.onclick = function () {
                bar.className = 'pros prosac1'
            }
            jobs3.onclick = function () {
                bar.className = 'pros prosac2'
            }
        </script>
        <div class="jobsL">
            <div class="big"><img src="images/job1.jpg" width="600px"></div>
            <div class="small">
                <div class="smallT"><img src="images/job2.jpg"></div>
                <div class="smallB"><img src="images/job3.jpg"></div>
            </div>
        </div>
    </section>


    <script src="tween/dist/tween.umd.js"></script>
    <script>
        // 加载完dom 延时清除loading 
        // setTimeout(function () {
        //     siteWelcome.classList.remove('active');
        // }, 1000)

        let specialTags = document.querySelectorAll('[data-ele]');
        for (let i = 0; i < specialTags.length; i++) {
            specialTags[i].classList.add('offset'); //从下往上的效果 先全部放在下沉位置
            //进度条效果同类名 利用选择器的不同一石二鸟
        }

        findClosest();
        window.onscroll = function () {
            if (window.scrollY > 0) {
                topNavBar.classList.add('sticky');
            } else {
                topNavBar.classList.remove('sticky');
            }
            findClosest();
        }

        function findClosest() {
            // 用属性标记要监控的元素 滚动 滚动谁近
            let specialTags = document.querySelectorAll('[data-ele]');
            let minIndex = 0; // 最近的元素标签序号
            for (let i = 1; i < specialTags.length; i++) {
                if ((Math.abs(specialTags[i].offsetTop - window.scrollY)) <
                    (Math.abs(specialTags[minIndex].offsetTop - window.scrollY))) {
                    minIndex = i;
                }
            }
            specialTags[minIndex].classList.remove('offset'); // navBar 激活效果 通过id找href="#id" let

            li = document.querySelector("[href='#" + specialTags[minIndex].id + "' ]").parentNode;
            let brothersAndMe = li.parentNode.children;
            for (let i = 0; i < brothersAndMe.length; i++) {
                brothersAndMe[i].classList.remove('highlight');
            }
            li.classList.add('highlight');
        }

        //监听含有二级菜单的li鼠标 移进 移出 进行切换类名操作
        let tags = document.querySelectorAll('nav>ul>li.menuTigger');
        for (let len = 0; len < tags.length; len++) {
            tags[len].onmouseenter = function (x) {
                x.currentTarget.classList.add('active')
            }
            tags[len].onmouseleave = function (x) {
                x.currentTarget.classList.remove('active')
            }
        }

        // Setup the animation loop.
        function animate(time) {
            requestAnimationFrame(animate);
            TWEEN.update(time);
        }
        requestAnimationFrame(animate);

        //锚点功能：监听点击a 事件 获取href数据 滚动到相应id 位置
        let aTags = document.querySelectorAll('nav.menu>ul>li>a')
        for (let i = 0; i < aTags.length; i++) {
            aTags[i].onclick = function (x) {
                x.preventDefault();
                let href = x.currentTarget.getAttribute('href');
                let anchorA = document.querySelector(href);

                let timeF = 10; // 每1个像素所需时间
                let currentP = window.scrollY; //当前y坐标
                let targetP = anchorA.offsetTop - 80; //目标y 坐标
                let distanceS = targetP - currentP; //距离S 
                let duration = Math.abs(distanceS * timeF) //动画完成时间
                if (duration > 1000) {
                    duration = 1000
                }

                var coords = {
                    y: currentP
                }; // Start at (0, 0)
                var tween = new TWEEN.Tween(coords) // Create a new tween that modifies 'coords'.
                    .to({
                        y: targetP
                    }, duration) // Move to (300, 200) in 1 second.
                    .easing(TWEEN.Easing.Quadratic.InOut) // Use an easing function to make the animation smooth.
                    .onUpdate(function () {
                        window.scrollTo(0, coords.y);
                    })
                    .start(); // Start the tween immediately.
            }
        }
    </script>
</body>

</html>